{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/utils.ts"],"names":[],"mappings":"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","sourcesContent":["// Helper function to perform deep merge of objects\nfunction deepMerge(target: any, source: any): any {\n  for (const key of Object.keys(source)) {\n    if (source[key] instanceof Object && key in target) {\n      Object.assign(source[key], deepMerge(target[key], source[key]));\n    }\n  }\n  Object.assign(target || {}, source);\n  return target;\n}\n\nexport function mergeSettings<T extends object>(\n  defaultSettings: T,\n  userSettings: Partial<T> = {}\n): T {\n  // Deep merge default settings with user settings\n  const mergedSettings = deepMerge({ ...defaultSettings }, userSettings);\n\n  return mergedSettings;\n}\n\n/**\n * Generates and appends a dynamic CSS style element based on the provided settings.\n *\n * @param settings - The settings containing the CSS variables to generate.\n * @param attribute - The data attribute used to apply the settings (e.g., \"font-size\").\n */\nexport function generateDynamicCSS(settings: any, attribute: string) {\n  // Remove existing dynamic styles\n  const existingStyleElement = document.getElementById(\n    `a11y-dynamic-styles-${attribute}`\n  );\n  if (existingStyleElement) {\n    existingStyleElement.remove();\n  }\n\n  const styleElement = document.createElement(\"style\");\n  styleElement.id = `a11y-dynamic-styles-${attribute}`;\n\n  let cssText = \"\";\n\n  settings.options?.forEach((option: any) => {\n    if (!option.urlPath) {\n      let cssVariables = \"\";\n      option.values.forEach((variable: any) => {\n        const key = Object.keys(variable)[0];\n        const value = variable[key];\n        cssVariables += `${key}: ${value}; `;\n      });\n      if (option.additionalCSS) {\n        cssVariables += option.additionalCSS;\n      }\n\n      cssText += `html[data-a11y-${attribute}=\"${option.label}\"] { \n      ${cssVariables} \n    } `;\n    } else {\n      cssText += `html[data-a11y-${attribute}=\"${option.label}\"] { @import url('${option.urlPath}');}`;\n    }\n  });\n  styleElement.textContent = cssText;\n  document.head.appendChild(styleElement);\n}\n\n// Function to insert a link to a stylesheet in the head of the document\nexport function insertStyleLink(id: string, url: string) {\n  const head = document.head;\n  // Remove any existing a11y-center stylesheets\n  const existingStylesheet = document.getElementById(id);\n  if (existingStylesheet) {\n    head.removeChild(existingStylesheet);\n  }\n  const link = document.createElement(\"link\");\n  link.rel = \"stylesheet\";\n  link.href = url;\n  link.id = id;\n  head.appendChild(link);\n}\n\n// Function to insert a style element in the head of the document\nexport function insertStyleElement(id: string, cssText: string) {\n  const head = document.head;\n  // Remove any existing a11y-center stylesheets\n  const existingStylesheet = document.getElementById(id);\n  if (existingStylesheet) {\n    head.removeChild(existingStylesheet);\n  }\n  const style = document.createElement(\"style\");\n  style.textContent = cssText;\n  style.id = id;\n  head.appendChild(style);\n}\n\n// Utility function to get all focusable elements within a container\nexport function getFocusableElements(container: HTMLElement): HTMLElement[] {\n  return Array.from(\n    container.querySelectorAll<HTMLElement>(\n      'input[type=radio], button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    )\n  );\n}\n\n// Function to get the next focusable element in the a11y bar\nexport function getNextFocusableElement(\n  triggerId: string,\n  a11yBarId: string\n): HTMLElement | null {\n  const a11yBar = document.getElementById(a11yBarId);\n  const trigger = document.getElementById(triggerId) as HTMLElement;\n\n  if (!a11yBar || !trigger) return null;\n\n  const focusableElements = getFocusableElements(a11yBar);\n  const triggerIndex = focusableElements.indexOf(trigger);\n\n  if (triggerIndex === -1 || triggerIndex + 1 >= focusableElements.length) {\n    return null; // No next focusable element\n  }\n\n  return focusableElements[triggerIndex + 1];\n}\n"]}